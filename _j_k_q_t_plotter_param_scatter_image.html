<!-- HTML header for doxygen 1.9.3-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>JKQTPlotter: Example (JKQTPlotter): Draw an Artistic Image with a Parametrized Scatter Graph</title>
<meta name="description" content="an extensive Qt5+Qt6 Plotter framework (including a feature-richt plotter widget, a speed-optimized, but limited variant and a LaTeX equation renderer!), written fully in C/C++ and without external dependencies">
<meta name="keywords" lang="en-us" content="C++, C++11, Qt, Qt5, Qt6, Plotting, Plot, Chart, Graph, Qt, Widget, C++, Library, Visualization, charting library, plotting library, scientific visualization, data visualization, statistics, statistical methods, statistics library, LaTeX parser, LaTeX renderer, Qt widget, Qt5 widget, Qt6 widget, Qt charts, Qt plots, barchart, violinplot, boxplot, JKQtPlotter, JKQTMathText, JKQTFastPlotter">
<meta name="author" content="$author">
<meta name="copyright" content="(c) 2008-2022 by $author">
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="jkqtplotter_stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="logo_doxygen.png"/></td>
  <td id="projectalign">
   <div id="projectname">JKQTPlotter<span id="projectnumber">&#160;trunk/v5.0.0</span>
   </div>
   <div id="projectbrief">an extensive Qt5+Qt6 Plotter framework (including a feature-richt plotter widget, a speed-optimized, but limited variant and a LaTeX equation renderer!), written fully in C/C++ and without external dependencies</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="topics.html"><span>Topics</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('_j_k_q_t_plotter_param_scatter_image.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Example (JKQTPlotter): Draw an Artistic Image with a Parametrized Scatter Graph</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This project (see <code>./examples/paramscatterplot_image/</code>) demonstrates the capabilities of <code><a class="el" href="class_j_k_q_t_p_x_y_parametrized_scatter_graph.html" title="This implements xy scatter plots (like JKQTPXYScatterGraph), but the color and size of the symbols ma...">JKQTPXYParametrizedScatterGraph</a></code> to display parametrized scatters in a rectangular arrangement. See the test program in <a href="https://github.com/jkriege2/JKQtPlotter/tree/master/examples/paramscatterplot"><code>examples/paramscatterplot</code></a> for a basic example of the capabilities of <code><a class="el" href="class_j_k_q_t_p_x_y_parametrized_scatter_graph.html" title="This implements xy scatter plots (like JKQTPXYScatterGraph), but the color and size of the symbols ma...">JKQTPXYParametrizedScatterGraph</a></code>.</p>
<p>In this example, we load an image, convert it to greyscale and store it, together with x/y-coordinate-vectors in the datastore. Then a <code><a class="el" href="class_j_k_q_t_p_x_y_parametrized_scatter_graph.html" title="This implements xy scatter plots (like JKQTPXYScatterGraph), but the color and size of the symbols ma...">JKQTPXYParametrizedScatterGraph</a></code> is used to draw the image as a pointilistic artwork, where each pixel is represented by a disk. The color of the disk is chosen from a color-palette, based on the grey-value. The size of each disk is chosen from the inverse grey value.</p>
<p>First we prepare the data, as described above. The image is loaded and then converted to the required data vectors. </p><div class="fragment"><div class="line"><span class="comment">// 2.1 load image</span></div>
<div class="line"><a class="code hl_class" href="class_j_k_q_t_p_final_act.html">QImage</a> image(<span class="stringliteral">&quot;:/example.bmp&quot;</span>);</div>
<div class="line"><a class="code hl_class" href="class_j_k_q_t_p_final_act.html">QVector&lt;double&gt;</a> <a class="code hl_class" href="class_j_k_q_t_p_final_act.html">imageVector</a>, <a class="code hl_class" href="class_j_k_q_t_p_final_act.html">pointSizes</a>;</div>
<div class="line"><a class="code hl_class" href="class_j_k_q_t_p_final_act.html">QVector&lt;double&gt;</a> X,Y;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// 2.2 convert image to greyscale, stored in a vector in row-major order</span></div>
<div class="line"><span class="keywordtype">double</span> <a class="code hl_class" href="class_j_k_q_t_p_final_act.html">maxSymbolSize</a>=30; <span class="comment">// maximal diameter of symbols in pt</span></div>
<div class="line"><span class="keywordflow">for</span> (<span class="keywordtype">int</span> y=0; y&lt;image.height(); y++) {</div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> x=0; x&lt;image.width(); x++) {</div>
<div class="line">        <span class="comment">// calculate grey-value image vector</span></div>
<div class="line">        <a class="code hl_class" href="class_j_k_q_t_p_final_act.html">imageVector</a>.push_back(<a class="code hl_class" href="class_j_k_q_t_p_final_act.html">qGray</a>(image.pixel(x,y)));</div>
<div class="line">        <span class="comment">// calculate point sizes from inverse grey value and scaling between 0 and maxSymbolSize</span></div>
<div class="line">        <a class="code hl_class" href="class_j_k_q_t_p_final_act.html">pointSizes</a>.push_back(<span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>(255-<a class="code hl_class" href="class_j_k_q_t_p_final_act.html">qGray</a>(image.pixel(x,y)))/255.0*<a class="code hl_class" href="class_j_k_q_t_p_final_act.html">maxSymbolSize</a>);</div>
<div class="line">        <span class="comment">// calculate X/Y-coordinates (y mirrored, so image is upright)</span></div>
<div class="line">        X.push_back(x);</div>
<div class="line">        Y.push_back(image.height()-1-y);</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// 2.3 and copy it to the datastore</span></div>
<div class="line"><span class="keywordtype">size_t</span> <a class="code hl_class" href="class_j_k_q_t_p_final_act.html">columnX</a>=<a class="code hl_class" href="class_j_k_q_t_p_final_act.html">ds</a>-&gt;addCopiedColumn(X, <span class="stringliteral">&quot;x&quot;</span>);</div>
<div class="line"><span class="keywordtype">size_t</span> <a class="code hl_class" href="class_j_k_q_t_p_final_act.html">columnY</a>=<a class="code hl_class" href="class_j_k_q_t_p_final_act.html">ds</a>-&gt;addCopiedColumn(Y, <span class="stringliteral">&quot;y&quot;</span>);</div>
<div class="line"><span class="keywordtype">size_t</span> <a class="code hl_class" href="class_j_k_q_t_p_final_act.html">columnG</a>=<a class="code hl_class" href="class_j_k_q_t_p_final_act.html">ds</a>-&gt;addCopiedColumn(<a class="code hl_class" href="class_j_k_q_t_p_final_act.html">imageVector</a>, <span class="stringliteral">&quot;greyscaleImageData&quot;</span>);</div>
<div class="line"><span class="keywordtype">size_t</span> <a class="code hl_class" href="class_j_k_q_t_p_final_act.html">columnS</a>=<a class="code hl_class" href="class_j_k_q_t_p_final_act.html">ds</a>-&gt;addCopiedColumn(<a class="code hl_class" href="class_j_k_q_t_p_final_act.html">pointSizes</a>, <span class="stringliteral">&quot;pointSizes&quot;</span>);</div>
<div class="ttc" id="aclass_j_k_q_t_p_final_act_html"><div class="ttname"><a href="class_j_k_q_t_p_final_act.html">JKQTPFinalAct</a></div><div class="ttdoc">C++11 finally construct (executes a callable-object when the edestructor is executed)</div><div class="ttdef"><b>Definition</b> jkqtpcodestructuring.h:48</div></div>
</div><!-- fragment --><p>Now we can use th datavectors to add a <code><a class="el" href="class_j_k_q_t_p_x_y_parametrized_scatter_graph.html" title="This implements xy scatter plots (like JKQTPXYScatterGraph), but the color and size of the symbols ma...">JKQTPXYParametrizedScatterGraph</a></code>: </p><div class="fragment"><div class="line"><a class="code hl_class" href="class_j_k_q_t_p_x_y_parametrized_scatter_graph.html">JKQTPXYParametrizedScatterGraph</a>* <a class="code hl_class" href="class_j_k_q_t_p_final_act.html">graph1</a>=<span class="keyword">new</span> <a class="code hl_class" href="class_j_k_q_t_p_x_y_parametrized_scatter_graph.html">JKQTPXYParametrizedScatterGraph</a>(&amp;<a class="code hl_class" href="class_j_k_q_t_p_final_act.html">plot</a>);</div>
<div class="line"><a class="code hl_class" href="class_j_k_q_t_p_final_act.html">graph1</a>-&gt;setXColumn(<a class="code hl_class" href="class_j_k_q_t_p_final_act.html">columnX</a>);</div>
<div class="line"><a class="code hl_class" href="class_j_k_q_t_p_final_act.html">graph1</a>-&gt;setYColumn(<a class="code hl_class" href="class_j_k_q_t_p_final_act.html">columnY</a>);</div>
<div class="line"><a class="code hl_class" href="class_j_k_q_t_p_final_act.html">graph1</a>-&gt;setSizeColumn(<a class="code hl_class" href="class_j_k_q_t_p_final_act.html">columnS</a>);</div>
<div class="line"><a class="code hl_class" href="class_j_k_q_t_p_final_act.html">graph1</a>-&gt;setSymbolType(<a class="code hl_enumvalue" href="group__jkqtptools__drawing.html#ggacdaaac6baeadbfd3677d4d53ea594b5bada0a2e7211f7a4f5c4ffd6d60f9bade2">JKQTPFilledCircle</a>);</div>
<div class="line"><a class="code hl_class" href="class_j_k_q_t_p_final_act.html">graph1</a>-&gt;setColorColumn(<a class="code hl_class" href="class_j_k_q_t_p_final_act.html">columnG</a>);</div>
<div class="line"><a class="code hl_class" href="class_j_k_q_t_p_final_act.html">graph1</a>-&gt;setColorPalette(<a class="code hl_enumvalue" href="group__jkqtplotter__imagelots__tools.html#ggaae2f1de8b42bb1734243b4201f4aa72da1879a8e269bb9bff662d7b246f75b474">JKQTPMathImageMATLAB</a>);</div>
<div class="line"><a class="code hl_class" href="class_j_k_q_t_p_final_act.html">graph1</a>-&gt;setDrawLine(<span class="keyword">false</span>);</div>
<div class="line"><a class="code hl_class" href="class_j_k_q_t_p_final_act.html">graph1</a>-&gt;setTitle(<span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a class="code hl_class" href="class_j_k_q_t_p_final_act.html">plot</a>.addGraph(<a class="code hl_class" href="class_j_k_q_t_p_final_act.html">graph1</a>);</div>
<div class="ttc" id="aclass_j_k_q_t_p_x_y_parametrized_scatter_graph_html"><div class="ttname"><a href="class_j_k_q_t_p_x_y_parametrized_scatter_graph.html">JKQTPXYParametrizedScatterGraph</a></div><div class="ttdoc">This implements xy scatter plots (like JKQTPXYScatterGraph), but the color and size of the symbols ma...</div><div class="ttdef"><b>Definition</b> jkqtpscatter.h:153</div></div>
<div class="ttc" id="agroup__jkqtplotter__imagelots__tools_html_ggaae2f1de8b42bb1734243b4201f4aa72da1879a8e269bb9bff662d7b246f75b474"><div class="ttname"><a href="group__jkqtplotter__imagelots__tools.html#ggaae2f1de8b42bb1734243b4201f4aa72da1879a8e269bb9bff662d7b246f75b474">JKQTPMathImageMATLAB</a></div><div class="ttdeci">@ JKQTPMathImageMATLAB</div><div class="ttdef"><b>Definition</b> jkqtpbasicimagetools.h:100</div></div>
<div class="ttc" id="agroup__jkqtptools__drawing_html_ggacdaaac6baeadbfd3677d4d53ea594b5bada0a2e7211f7a4f5c4ffd6d60f9bade2"><div class="ttname"><a href="group__jkqtptools__drawing.html#ggacdaaac6baeadbfd3677d4d53ea594b5bada0a2e7211f7a4f5c4ffd6d60f9bade2">JKQTPFilledCircle</a></div><div class="ttdeci">@ JKQTPFilledCircle</div><div class="ttdoc">a filled circle</div><div class="ttdef"><b>Definition</b> jkqtpdrawingtools.h:106</div></div>
</div><!-- fragment --><p>For illustrative purposes, the original image is shown at the bottom-left: </p><div class="fragment"><div class="line"><a class="code hl_class" href="class_j_k_q_t_p_image.html">JKQTPImage</a>* <a class="code hl_class" href="class_j_k_q_t_p_final_act.html">graph2</a>=<span class="keyword">new</span> <a class="code hl_class" href="class_j_k_q_t_p_image.html">JKQTPImage</a>(&amp;<a class="code hl_class" href="class_j_k_q_t_p_final_act.html">plot</a>);</div>
<div class="line"><a class="code hl_class" href="class_j_k_q_t_p_final_act.html">graph2</a>-&gt;setImage(image);</div>
<div class="line"><a class="code hl_class" href="class_j_k_q_t_p_final_act.html">graph2</a>-&gt;setX(0);</div>
<div class="line"><a class="code hl_class" href="class_j_k_q_t_p_final_act.html">graph2</a>-&gt;setY(0);</div>
<div class="line"><a class="code hl_class" href="class_j_k_q_t_p_final_act.html">graph2</a>-&gt;setWidth(10);</div>
<div class="line"><a class="code hl_class" href="class_j_k_q_t_p_final_act.html">graph2</a>-&gt;setHeight(10);</div>
<div class="line"><a class="code hl_class" href="class_j_k_q_t_p_final_act.html">plot</a>.addGraph(<a class="code hl_class" href="class_j_k_q_t_p_final_act.html">graph2</a>);</div>
<div class="ttc" id="aclass_j_k_q_t_p_image_html"><div class="ttname"><a href="class_j_k_q_t_p_image.html">JKQTPImage</a></div><div class="ttdoc">class to plot an image from a QImage object</div><div class="ttdef"><b>Definition</b> jkqtpimage.h:302</div></div>
</div><!-- fragment --><p>Finally the plot is styled and the axis aspect ratios are fixed: </p><div class="fragment"><div class="line"><span class="comment">// scale the plot so the graph is contained and format the coordinate system</span></div>
<div class="line"><a class="code hl_class" href="class_j_k_q_t_p_final_act.html">plot</a>.getXAxis()-&gt;setAxisLabel(<span class="stringliteral">&quot;x-axis&quot;</span>);</div>
<div class="line"><a class="code hl_class" href="class_j_k_q_t_p_final_act.html">plot</a>.getYAxis()-&gt;setAxisLabel(<span class="stringliteral">&quot;y-axis&quot;</span>);</div>
<div class="line"><a class="code hl_class" href="class_j_k_q_t_p_final_act.html">plot</a>.getXAxis()-&gt;setDrawGrid(<span class="keyword">false</span>);</div>
<div class="line"><a class="code hl_class" href="class_j_k_q_t_p_final_act.html">plot</a>.getYAxis()-&gt;setDrawGrid(<span class="keyword">false</span>);</div>
<div class="line"><span class="comment">// max. size is the size of the image</span></div>
<div class="line"><a class="code hl_class" href="class_j_k_q_t_p_final_act.html">plot</a>.setXY(0,image.width()-1,0,image.height()-1);</div>
<div class="line"><a class="code hl_class" href="class_j_k_q_t_p_final_act.html">plot</a>.setAbsoluteXY(0,image.width()-1,0,image.height()-1);</div>
<div class="line"><span class="comment">// ensure that axis aspect ratio and coordinate system aspect ratio are maintained</span></div>
<div class="line"><a class="code hl_class" href="class_j_k_q_t_p_final_act.html">plot</a>.getPlotter()-&gt;setMaintainAspectRatio(<span class="keyword">true</span>);</div>
<div class="line"><a class="code hl_class" href="class_j_k_q_t_p_final_act.html">plot</a>.getPlotter()-&gt;setAspectRatio(1);</div>
<div class="line"><a class="code hl_class" href="class_j_k_q_t_p_final_act.html">plot</a>.getPlotter()-&gt;setMaintainAxisAspectRatio(<span class="keyword">true</span>);</div>
<div class="line"><a class="code hl_class" href="class_j_k_q_t_p_final_act.html">plot</a>.getPlotter()-&gt;setAxisAspectRatio(1);</div>
</div><!-- fragment --><p>The full test appication combines all these variants and the result looks like this:</p>
<p><img src="https://raw.githubusercontent.com/jkriege2/JKQtPlotter/master/screenshots/paramscatterplot_image.png" alt="paramscatterplot_image" class="inline"/></p>
<p>You can modify the example above in several ways, <a class="el" href="class_j_k_q_t_p_final_act.html#af964d2f5e77728dfe65e13964ea9b02a">e.g</a>. by choosing another symbol (<a class="el" href="class_j_k_q_t_p_final_act.html#af964d2f5e77728dfe65e13964ea9b02a">e.g</a>. a star):</p>
<p><img src="https://raw.githubusercontent.com/jkriege2/JKQtPlotter/master/screenshots/paramscatterplot_image_star.png" alt="paramscatterplot_image_star" class="inline"/></p>
<p>... or by changing the color palette and the symbol:</p>
<p><img src="https://raw.githubusercontent.com/jkriege2/JKQtPlotter/master/screenshots/paramscatterplot_image_palette.png" alt="paramscatterplot_image_palette" class="inline"/></p>
<p><img src="https://raw.githubusercontent.com/jkriege2/JKQtPlotter/master/screenshots/paramscatterplot_image_palette_triangle.png" alt="paramscatterplot_image_palette_triangle" class="inline"/></p>
<p>... or even to set a different symbol for each pixel, based on the values in <code>columnS</code> (simply add <code>graph1-&gt;setSymbolColumn(columnS)</code>):</p>
<p><img src="https://raw.githubusercontent.com/jkriege2/JKQtPlotter/master/screenshots/paramscatterplot_image_varsymbol.png" alt="paramscatterplot_image_varsymbol" class="inline"/> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.3-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="example_tutorial_projects.html">Example &amp; Tutorial Projects</a></li>
    <li class="footer">Generated on Wed Jan 10 2024 09:37:57 for JKQTPlotter by <a href="https://www.doxygen.org/index.html">doxygen</a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
